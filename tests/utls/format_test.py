# -*- coding: utf-8 -*-
from costreduce.utils.format import grid
from textwrap import dedent
import re


def clean(text):
    return re.sub(r"( +)$", "", text, flags=re.MULTILINE) + "\n"


is_empty = dedent(
    """\
+-------+------------+------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   #   |  Provider  |  Service   |                                                                                               Description                                                                                                |
+=======+============+============+==========================================================================================================================================================================================================+
+-------+------------+------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
"""
)
is_not_empty = dedent(
    """\
+-------+------------+------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|   #   |  Provider  |  Service   |                                                                                               Description                                                                                                |
+=======+============+============+==========================================================================================================================================================================================================+
| 0     | EC2        | AWS        | t                                                                                                                                                                                                        |
+-------+------------+------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 1     | EC2        | AWS        | e                                                                                                                                                                                                        |
+-------+------------+------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 2     | EC2        | AWS        | s                                                                                                                                                                                                        |
+-------+------------+------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 3     | EC2        | AWS        | t                                                                                                                                                                                                        |
+-------+------------+------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
"""
)


def test_grid_is_empty():
    result = grid("", "", "")
    clean(result).should.equal(is_empty)


def test_grid_is_not_empty():
    result = grid("test", "AWS", "EC2")
    clean(result).should.equal(is_not_empty)
